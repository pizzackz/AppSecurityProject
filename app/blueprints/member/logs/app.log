2024-07-10 19:13:23,180 - flask_app - WARNING - Order from validation field: {}
2024-07-10 19:14:21,999 - flask_app - WARNING - Order from validation field: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.'], 'selected_time': ['This field is required.']}
2024-07-10 19:15:39,577 - flask_app - WARNING - Order from validation field: {}
2024-07-10 19:16:56,963 - flask_app - WARNING - Order from validation field: {}
2024-07-10 19:16:59,056 - flask_app - WARNING - Order from validation field: {}
2024-07-10 19:17:11,285 - flask_app - WARNING - Order from validation field: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.'], 'selected_date': ['This field is required.'], 'selected_time': ['This field is required.']}
2024-07-10 19:17:16,668 - flask_app - WARNING - Order from validation field: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.'], 'selected_date': ['This field is required.'], 'selected_time': ['This field is required.']}
2024-07-10 19:17:17,375 - flask_app - WARNING - Order from validation field: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.'], 'selected_date': ['This field is required.'], 'selected_time': ['This field is required.']}
2024-07-10 19:19:49,148 - flask_app - WARNING - Order from validation field: {}
2024-07-10 19:19:52,009 - flask_app - WARNING - Order from validation field: {}
2024-07-10 19:20:01,912 - flask_app - WARNING - Order from validation field: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.'], 'selected_date': ['This field is required.'], 'selected_time': ['This field is required.']}
2024-07-10 19:20:08,171 - flask_app - WARNING - Order from validation field: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.']}
2024-07-10 21:51:05,825 - flask_app - WARNING - Order form validation failed: {}
2024-07-10 21:51:12,699 - flask_app - WARNING - Order form validation failed: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.'], 'selected_date': ['This field is required.'], 'selected_time': ['This field is required.']}
2024-07-10 21:51:17,404 - flask_app - WARNING - Order form validation failed: {'postal_code': ['Please enter a valid 6-digit postal code.'], 'phone_number': ['Please enter a valid phone number in the format 8/9XXX XXXX.']}
2024-07-10 21:51:28,126 - flask_app - WARNING - Order form validation failed: {'postal_code': ['Please enter a valid 6-digit postal code.']}
2024-07-10 21:51:42,794 - flask_app - INFO - Order 14 created successfully for customer josh.
2024-07-11 16:31:10,451 - flask_app - WARNING - Order form validation failed: {}
2024-07-11 16:31:48,974 - flask_app - WARNING - Order form validation failed: {}
2024-07-11 16:45:28,291 - flask_app - WARNING - Order form validation failed: {}
2024-07-11 16:48:27,201 - flask_app - WARNING - Order form validation failed: {}
2024-07-11 16:57:28,674 - flask_app - ERROR - Stripe error: No API key provided. (HINT: set your API key using "stripe.api_key = <API-KEY>"). You can generate API keys from the Stripe web interface.  See https://stripe.com/api for details, or email support@stripe.com if you have any questions.
2024-07-11 16:57:30,752 - flask_app - ERROR - Stripe error: No API key provided. (HINT: set your API key using "stripe.api_key = <API-KEY>"). You can generate API keys from the Stripe web interface.  See https://stripe.com/api for details, or email support@stripe.com if you have any questions.
2024-07-11 16:57:31,980 - flask_app - ERROR - Stripe error: No API key provided. (HINT: set your API key using "stripe.api_key = <API-KEY>"). You can generate API keys from the Stripe web interface.  See https://stripe.com/api for details, or email support@stripe.com if you have any questions.
2024-07-11 16:57:34,388 - flask_app - ERROR - Stripe error: No API key provided. (HINT: set your API key using "stripe.api_key = <API-KEY>"). You can generate API keys from the Stripe web interface.  See https://stripe.com/api for details, or email support@stripe.com if you have any questions.
2024-07-11 16:57:34,643 - flask_app - ERROR - Stripe error: No API key provided. (HINT: set your API key using "stripe.api_key = <API-KEY>"). You can generate API keys from the Stripe web interface.  See https://stripe.com/api for details, or email support@stripe.com if you have any questions.
2024-07-11 16:57:34,828 - flask_app - ERROR - Stripe error: No API key provided. (HINT: set your API key using "stripe.api_key = <API-KEY>"). You can generate API keys from the Stripe web interface.  See https://stripe.com/api for details, or email support@stripe.com if you have any questions.
2024-07-11 19:07:05,550 - flask_app - WARNING - Order form validation failed: {}
2024-07-15 10:57:53,508 - flask_app - WARNING - Order form validation failed: {}
2024-07-20 16:52:03,026 - flask_app - ERROR - An error occurred while clearing Member table: (MySQLdb.OperationalError) (1054, "Unknown column 'login_details.is_active' in 'field list'")
[SQL: SELECT login_details.id AS login_details_id, login_details.last_login AS login_details_last_login, login_details.last_logout AS login_details_last_logout, login_details.is_active AS login_details_is_active 
FROM login_details 
WHERE login_details.id = %s]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-07-20 16:52:03,037 - flask_app - INFO - Members test data already exists.
2024-07-20 16:53:18,037 - flask_app - INFO - Deleted 0 rows from Member table.
2024-07-20 16:53:18,251 - flask_app - INFO - Members test data added!
2024-07-28 13:52:26,729 - flask_app - ERROR - An error occurred while clearing Admin table: (MySQLdb.OperationalError) (1054, "Unknown column 'admin.master_key_id' in 'field list'")
[SQL: SELECT `admin`.id AS admin_id, user.id AS user_id, user.username AS user_username, user.email AS user_email, user.password_hash AS user_password_hash, user.google_id AS user_google_id, user.phone_number AS user_phone_number, user.address AS user_address, user.postal_code AS user_postal_code, user.created_at AS user_created_at, user.updated_at AS user_updated_at, user.type AS user_type, `admin`.master_key_id AS admin_master_key_id 
FROM user INNER JOIN `admin` ON user.id = `admin`.id]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-07-28 13:53:36,096 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-28 13:53:36,302 - flask_app - INFO - Admins test data added!
2024-07-28 14:37:02,406 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-28 14:37:02,639 - flask_app - INFO - Admins test data added!
2024-07-28 14:48:38,699 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-28 14:48:39,280 - flask_app - INFO - Admins test data added!
2024-07-28 14:49:15,564 - flask_app - INFO - Deleted 2 rows from Admin table.
2024-07-28 14:49:16,013 - flask_app - INFO - Admins test data added!
2024-07-28 15:56:48,624 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-28 15:56:49,044 - flask_app - INFO - Admins test data added!
2024-07-28 15:58:07,830 - flask_app - INFO - Deleted 2 rows from Admin table.
2024-07-28 15:58:08,283 - flask_app - INFO - Admins test data added!
2024-07-29 10:05:25,377 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-29 10:05:26,045 - flask_app - INFO - Admins test data added!
2024-07-29 11:13:38,542 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-29 11:13:39,222 - flask_app - INFO - Admins test data added!
2024-07-29 11:13:54,135 - flask_app - INFO - Deleted 2 rows from Admin table.
2024-07-29 11:13:54,835 - flask_app - INFO - Admins test data added!
2024-07-30 20:55:01,415 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-30 20:55:01,909 - flask_app - INFO - Admins test data added!
2024-07-31 17:10:08,467 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-31 17:10:09,014 - flask_app - INFO - Admins test data added!
2024-07-31 17:10:09,019 - flask_app - INFO - Deleted 0 rows from Member table.
2024-07-31 17:10:09,264 - flask_app - INFO - Members test data added!
2024-07-31 18:24:30,118 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-07-31 18:24:30,723 - flask_app - INFO - Admins test data added!
2024-07-31 18:24:30,727 - flask_app - INFO - Deleted 0 rows from Member table.
2024-07-31 18:24:31,003 - flask_app - INFO - Members test data added!
2024-08-01 17:42:54,618 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-08-01 17:42:55,395 - flask_app - INFO - Admins test data added!
2024-08-01 17:42:55,401 - flask_app - INFO - Deleted 0 rows from Member table.
2024-08-01 17:42:55,748 - flask_app - INFO - Members test data added!
2024-08-01 19:04:30,326 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-08-01 19:04:30,702 - flask_app - INFO - Admins test data added!
2024-08-01 19:04:30,705 - flask_app - INFO - Deleted 0 rows from Member table.
2024-08-01 19:04:30,901 - flask_app - INFO - Members test data added!
2024-08-01 19:16:40,765 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-08-01 19:16:41,123 - flask_app - INFO - Admins test data added!
2024-08-01 19:16:41,126 - flask_app - INFO - Deleted 0 rows from Member table.
2024-08-01 19:16:41,304 - flask_app - INFO - Members test data added!
2024-08-01 20:19:07,150 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-08-01 20:19:07,586 - flask_app - INFO - Admins test data added!
2024-08-01 20:19:07,590 - flask_app - INFO - Deleted 0 rows from Member table.
2024-08-01 20:19:07,809 - flask_app - INFO - Members test data added!
2024-08-02 11:14:28,918 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-08-02 11:14:29,411 - flask_app - INFO - Admins test data added!
2024-08-02 11:14:29,415 - flask_app - INFO - Deleted 0 rows from Member table.
2024-08-02 11:14:29,630 - flask_app - INFO - Members test data added!
2024-08-02 16:56:35,648 - flask_app - INFO - Retrieved Stripe session: {
  "after_expiration": null,
  "allow_promotion_codes": null,
  "amount_subtotal": 3000,
  "amount_total": 3000,
  "automatic_tax": {
    "enabled": false,
    "liability": null,
    "status": null
  },
  "billing_address_collection": null,
  "cancel_url": "http://localhost:5000/cancel",
  "client_reference_id": null,
  "client_secret": null,
  "consent": null,
  "consent_collection": null,
  "created": 1722588961,
  "currency": "sgd",
  "currency_conversion": null,
  "custom_fields": [],
  "custom_text": {
    "after_submit": null,
    "shipping_address": null,
    "submit": null,
    "terms_of_service_acceptance": null
  },
  "customer": "cus_QaSC23MipPWDEO",
  "customer_creation": "always",
  "customer_details": {
    "address": {
      "city": null,
      "country": "SG",
      "line1": null,
      "line2": null,
      "postal_code": null,
      "state": null
    },
    "email": "member1@gmail.com",
    "name": "Member",
    "phone": null,
    "tax_exempt": "none",
    "tax_ids": []
  },
  "customer_email": null,
  "expires_at": 1722675361,
  "id": "cs_test_a18o7VJd3zD0LvXl36DTknqPAcs11qph3vJ3zsk8virvlnZcTkA07i2bgx",
  "invoice": "in_1PjHHm06BsEMbNMkMNqACbvK",
  "invoice_creation": null,
  "livemode": false,
  "locale": null,
  "metadata": {
    "user_id": "3"
  },
  "mode": "subscription",
  "object": "checkout.session",
  "payment_intent": null,
  "payment_link": null,
  "payment_method_collection": "always",
  "payment_method_configuration_details": null,
  "payment_method_options": {
    "card": {
      "request_three_d_secure": "automatic"
    }
  },
  "payment_method_types": [
    "card"
  ],
  "payment_status": "paid",
  "phone_number_collection": {
    "enabled": false
  },
  "recovered_from": null,
  "saved_payment_method_options": {
    "allow_redisplay_filters": [
      "always"
    ],
    "payment_method_remove": null,
    "payment_method_save": null
  },
  "setup_intent": null,
  "shipping_address_collection": null,
  "shipping_cost": null,
  "shipping_details": null,
  "shipping_options": [],
  "status": "complete",
  "submit_type": null,
  "subscription": "sub_1PjHHm06BsEMbNMkFM5BLNEB",
  "success_url": "http://localhost:5000/success?user_id=3&action=None&session_id={CHECKOUT_SESSION_ID}",
  "total_details": {
    "amount_discount": 0,
    "amount_shipping": 0,
    "amount_tax": 0
  },
  "ui_mode": "hosted",
  "url": null
}
2024-08-02 16:57:55,075 - flask_app - INFO - Retrieved Stripe session: {
  "after_expiration": null,
  "allow_promotion_codes": null,
  "amount_subtotal": 3000,
  "amount_total": 3000,
  "automatic_tax": {
    "enabled": false,
    "liability": null,
    "status": null
  },
  "billing_address_collection": null,
  "cancel_url": "http://localhost:5000/cancel",
  "client_reference_id": null,
  "client_secret": null,
  "consent": null,
  "consent_collection": null,
  "created": 1722589047,
  "currency": "sgd",
  "currency_conversion": null,
  "custom_fields": [],
  "custom_text": {
    "after_submit": null,
    "shipping_address": null,
    "submit": null,
    "terms_of_service_acceptance": null
  },
  "customer": "cus_QaSD1LI16YnLdS",
  "customer_creation": "always",
  "customer_details": {
    "address": {
      "city": null,
      "country": "SG",
      "line1": null,
      "line2": null,
      "postal_code": null,
      "state": null
    },
    "email": "member2@gmail.com",
    "name": "Member",
    "phone": null,
    "tax_exempt": "none",
    "tax_ids": []
  },
  "customer_email": null,
  "expires_at": 1722675447,
  "id": "cs_test_a1IdJioJcIHejikB7tMNJ5iZFvd4W55wOUkgIV9e7OIE5st6Lo0ufiMRfS",
  "invoice": "in_1PjHJ306BsEMbNMkNLwurRPy",
  "invoice_creation": null,
  "livemode": false,
  "locale": null,
  "metadata": {
    "user_id": "4"
  },
  "mode": "subscription",
  "object": "checkout.session",
  "payment_intent": null,
  "payment_link": null,
  "payment_method_collection": "always",
  "payment_method_configuration_details": null,
  "payment_method_options": {
    "card": {
      "request_three_d_secure": "automatic"
    }
  },
  "payment_method_types": [
    "card"
  ],
  "payment_status": "paid",
  "phone_number_collection": {
    "enabled": false
  },
  "recovered_from": null,
  "saved_payment_method_options": {
    "allow_redisplay_filters": [
      "always"
    ],
    "payment_method_remove": null,
    "payment_method_save": null
  },
  "setup_intent": null,
  "shipping_address_collection": null,
  "shipping_cost": null,
  "shipping_details": null,
  "shipping_options": [],
  "status": "complete",
  "submit_type": null,
  "subscription": "sub_1PjHJ306BsEMbNMkZJrESCts",
  "success_url": "http://localhost:5000/success?user_id=4&action=None&session_id={CHECKOUT_SESSION_ID}",
  "total_details": {
    "amount_discount": 0,
    "amount_shipping": 0,
    "amount_tax": 0
  },
  "ui_mode": "hosted",
  "url": null
}
2024-08-02 16:59:58,176 - flask_app - INFO - Retrieved Stripe session: {
  "after_expiration": null,
  "allow_promotion_codes": null,
  "amount_subtotal": 3000,
  "amount_total": 3000,
  "automatic_tax": {
    "enabled": false,
    "liability": null,
    "status": null
  },
  "billing_address_collection": null,
  "cancel_url": "http://localhost:5000/cancel",
  "client_reference_id": null,
  "client_secret": null,
  "consent": null,
  "consent_collection": null,
  "created": 1722589173,
  "currency": "sgd",
  "currency_conversion": null,
  "custom_fields": [],
  "custom_text": {
    "after_submit": null,
    "shipping_address": null,
    "submit": null,
    "terms_of_service_acceptance": null
  },
  "customer": "cus_QaSF74RDOeWELk",
  "customer_creation": "always",
  "customer_details": {
    "address": {
      "city": null,
      "country": "SG",
      "line1": null,
      "line2": null,
      "postal_code": null,
      "state": null
    },
    "email": "member2@gmail.com",
    "name": "Member",
    "phone": null,
    "tax_exempt": "none",
    "tax_ids": []
  },
  "customer_email": null,
  "expires_at": 1722675573,
  "id": "cs_test_a1vWT0rNVUkXng9SaqsOt4zWhe2nAYdq3ncLlVjtn4FXvpfqLcLYfhgKv3",
  "invoice": "in_1PjHL206BsEMbNMkvzG8FCEw",
  "invoice_creation": null,
  "livemode": false,
  "locale": null,
  "metadata": {
    "user_id": "4"
  },
  "mode": "subscription",
  "object": "checkout.session",
  "payment_intent": null,
  "payment_link": null,
  "payment_method_collection": "always",
  "payment_method_configuration_details": null,
  "payment_method_options": {
    "card": {
      "request_three_d_secure": "automatic"
    }
  },
  "payment_method_types": [
    "card"
  ],
  "payment_status": "paid",
  "phone_number_collection": {
    "enabled": false
  },
  "recovered_from": null,
  "saved_payment_method_options": {
    "allow_redisplay_filters": [
      "always"
    ],
    "payment_method_remove": null,
    "payment_method_save": null
  },
  "setup_intent": null,
  "shipping_address_collection": null,
  "shipping_cost": null,
  "shipping_details": null,
  "shipping_options": [],
  "status": "complete",
  "submit_type": null,
  "subscription": "sub_1PjHL206BsEMbNMkAO765iDU",
  "success_url": "http://localhost:5000/success?user_id=4&action=None&session_id={CHECKOUT_SESSION_ID}",
  "total_details": {
    "amount_discount": 0,
    "amount_shipping": 0,
    "amount_tax": 0
  },
  "ui_mode": "hosted",
  "url": null
}
2024-08-02 16:59:59,293 - flask_app - ERROR - Error retrieving Stripe session: (MySQLdb.IntegrityError) (1062, "Duplicate entry '4' for key 'payments.PRIMARY'")
[SQL: INSERT INTO payments (user_id, stripe_payment_id, amount, currency, status, created_at) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: (4, 'in_1PjHL206BsEMbNMkvzG8FCEw', 3000, 'sgd', 'paid', datetime.datetime(2024, 8, 2, 8, 59, 52, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-08-02 17:02:07,592 - flask_app - INFO - Deleted 0 rows from Admin table.
2024-08-02 17:02:08,424 - flask_app - INFO - Admins test data added!
2024-08-02 17:02:08,430 - flask_app - INFO - Deleted 0 rows from Member table.
2024-08-02 17:02:08,765 - flask_app - INFO - Members test data added!
2024-08-02 17:02:23,666 - flask_app - INFO - Deleted 0 rows from MenuItem table.
2024-08-02 17:02:23,680 - flask_app - INFO - Menu Items test data added!
2024-08-02 17:02:23,738 - flask_app - INFO - Deleted 2 rows from Admin table.
2024-08-02 17:02:24,239 - flask_app - INFO - Admins test data added!
2024-08-02 17:02:24,262 - flask_app - INFO - Deleted 2 rows from Member table.
2024-08-02 17:02:24,500 - flask_app - INFO - Members test data added!
